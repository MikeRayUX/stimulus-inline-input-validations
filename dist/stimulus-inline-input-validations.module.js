var d=Object.defineProperty;var p=(e,a,t)=>a in e?d(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t;var u=(e,a,t)=>(p(e,typeof a!="symbol"?a+"":a,t),t);import{Controller as y}from"@hotwired/stimulus";var h={numericality:/^[+-]?(\d+(\.\d*)?|\.\d+)([eE][+-]?\d+)?$/,email:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,singleNumber:/[0-9]/,singleCapitalLetter:/[A-Z]/,singleSpecialCharacter:/[!@#$%^&*]/,singleQuotes:/'/},o=h;var g={locales:{en:{presence:"Can't be blank",length:{min:"Too short. Minimum {value} characters",max:"Too long. Maximum {value} characters"},numericality:"Must be a number",email:"Invalid email format",strongPassword:{capitalLetter:"Must contain at least one capital letter (A-Z)",number:"Must contain at least one number",specialCharacter:"Must contain at least one special character (!@#$%^&*)",length:"Must be at least 10 characters long"}},es:{presence:"no puede estar en blanco",length:{min:"Demasiado corto. M\xEDnimo {value} caracteres",max:"Demasiado largo. M\xE1ximo {value} caracteres"},numericality:"Tiene que ser un n\xFAmero",email:"Formato de correo inv\xE1lido",strongPassword:{capitalLetter:"Debe contener al menos una letra may\xFAscula (A-Z)",number:"Debe contener al menos un n\xFAmero",specialCharacter:"Debe contener al menos un car\xE1cter especial (!@#$%^&*)",length:"Debe tener al menos 10 caracteres"}},fr:{presence:"Je ne peux pas \xEAtre vide",length:{min:"Trop court. Minimum {value} caract\xE8res",max:"Trop long. {value} caract\xE8res maximum"},numericality:"Doit \xEAtre un nombre",email:"Format d'email invalide",strongPassword:{capitalLetter:"Doit contenir au moins une lettre majuscule (A-Z)",number:"Doit contenir au moins un chiffre",specialCharacter:"Doit contenir au moins un caract\xE8re sp\xE9cial (!@#$%^&*)",length:"Doit contenir au moins 10\xA0caract\xE8res"}},"pt-BR":{presence:"N\xE3o posso ficar em branco",length:{min:"Muito curto. M\xEDnimo {value} caracteres",max:"Demasiado longo. M\xE1ximo de {value} caracteres"},numericality:"Deve ser um n\xFAmero",email:"Formato de email inv\xE1lido",strongPassword:{capitalLetter:"Deve conter pelo menos uma letra mai\xFAscula (A-Z)",number:"Deve conter pelo menos um n\xFAmero",specialCharacter:"Deve conter pelo menos um caractere especial (!@#$%^&*)",length:"Deve ter pelo menos 10 caracteres"}},"zh-CN":{presence:"\u4E0D\u80FD\u4E3A\u7A7A",length:{min:"\u8FC7\u77ED\u3002\u6700\u5C11 {value} \u4E2A\u5B57\u7B26",max:"\u592A\u957F\u3002\u6700\u591A {value} \u4E2A\u5B57\u7B26"},numericality:"\u5FC5\u987B\u662F\u4E00\u4E2A\u6570\u5B57",email:"\u7535\u5B50\u90AE\u4EF6\u683C\u5F0F\u65E0\u6548",strongPassword:{capitalLetter:"\u5FC5\u987B\u5305\u542B\u81F3\u5C11\u4E00\u4E2A\u5927\u5199\u5B57\u6BCD (A-Z)",number:"\u5FC5\u987B\u81F3\u5C11\u5305\u542B\u4E00\u4E2A\u6570\u5B57",specialCharacter:"\u5FC5\u987B\u81F3\u5C11\u5305\u542B\u4E00\u4E2A\u7279\u6B8A\u5B57\u7B26 (!@#$%^&*)",length:"\u957F\u5EA6\u5FC5\u987B\u81F3\u5C11 10 \u4E2A\u5B57\u7B26"}},"zh-TW":{presence:"\u4E0D\u80FD\u70BA\u7A7A",length:{min:"\u904E\u77ED\u3002\u6700\u5C11 {value} \u500B\u5B57\u7B26",max:"\u592A\u9577\u3002\u6700\u591A {value} \u500B\u5B57\u7B26"},numericality:"\u5FC5\u9808\u662F\u4E00\u500B\u6578\u5B57",email:"\u96FB\u5B50\u90F5\u4EF6\u683C\u5F0F\u7121\u6548",strongPassword:{capitalLetter:"\u5FC5\u9808\u5305\u542B\u81F3\u5C11\u4E00\u500B\u5927\u5BEB\u5B57\u6BCD (A-Z)",number:"\u5FC5\u9808\u81F3\u5C11\u5305\u542B\u4E00\u500B\u6578\u5B57",specialCharacter:"\u5FC5\u9808\u81F3\u5C11\u5305\u542B\u4E00\u500B\u7279\u6B8A\u5B57\u5143 (!@#$%^&*)",length:"\u9577\u5EA6\u5FC5\u9808\u81F3\u5C11 10 \u500B\u5B57\u7B26"}}}},n=g;var f={presence(e,a,t){e.trim().length===0&&a.push({type:"presence",message:n.locales[t].presence})},length(e,a,t,s){e.length<a.min&&t.push({type:"length-min",message:n.locales[s].length.min.replace(/{value}/g,a.min)}),e.length>a.max&&t.push({type:"length-max",message:n.locales[s].length.max.replace(/{value}/g,a.max)})},numericality(e,a,t){o.numericality.test(e)||a.push({type:"numericality",message:n.locales[t].numericality})},email(e,a,t){o.email.test(e)||a.push({type:"email",message:n.locales[t].email})},strongPassword(e,a,t,s){o.singleCapitalLetter.test(a)||t.push({type:"strong-password-capital-letter",message:n.locales[s].strongPassword.capitalLetter}),o.singleNumber.test(a)||t.push({type:"strong-password-number",message:n.locales[s].strongPassword.number}),o.singleSpecialCharacter.test(a)||t.push({type:"strong-password-special-character",message:n.locales[s].strongPassword.specialCharacter}),!(e.length&&e.some(i=>Object.keys(i).includes("length")))&&a.length<10&&t.push({type:"strong-password-length",message:n.locales[s].strongPassword.length})}},l=f;var b=["en","es","fr","pt-BR","zh-CN","zh-TW"],m=b;var c=class extends y{connect(){this.handlei18n(),this.fieldTargets.forEach(e=>{e.setAttribute("data-action","input->input-validator#validateInput"),e.addEventListener("blur",a=>{this.validateInput(a)})})}handlei18n(){let e=this.element.getAttribute("data-input-validator-i18n-locale")||"en";m.includes(e)?this.locale=e:(console.warn(`Stimulus Inline Input Validations: Unsupported i18n locale '${e}'. Supported data-input-validator-i18n-locale values are: ${m.join(", ")}. Using default language 'en'`),this.locale="en")}handleJSONValidations(e,a,t){a.forEach(s=>{let[i]=Object.keys(s);switch(i){case"presence":s.presence&&l.presence(e,t,this.locale);break;case"length":s.length.min&&s.length.max?l.length(e,s.length,t,this.locale):console.log("Couldn't validate length (missing keys min or max)");break;case"numericality":s.numericality&&l.numericality(e,t,this.locale);break;case"email":s.email&&l.email(e,t,this.locale);break;case"strong_password":s.strong_password&&l.strongPassword(a,e,t,this.locale);break;default:break}})}handleValidations(e,a,t){if(e.hasAttribute("data-validates-presence")&&e.getAttribute("data-validates-presence")!=="false"&&l.presence(a,t,this.locale),e.hasAttribute("data-validates-length")&&e.getAttribute("data-validates-length").length>2){let[s,i]=e.getAttribute("data-validates-length").split(",").map(Number);l.length(a,{min:s,max:i},t,this.locale)}e.hasAttribute("data-validates-numericality")&&e.getAttribute("data-validates-numericality")!=="false"&&l.numericality(a,t,this.locale),e.hasAttribute("data-validates-email")&&e.getAttribute("data-validates-email")!=="false"&&l.email(a,t,this.locale),e.hasAttribute("data-validates-strong-password")&&e.getAttribute("data-validates-strong-password")!=="false"&&l.strongPassword([],a,t,this.locale)}errorElement(e,a){let t="font-size: 14px; color: red",s;return e.hasAttribute("data-errors-styles-css")&&(t=e.getAttribute("data-errors-styles-css")),e.hasAttribute("data-errors-styles-class")&&(t=null,s=e.getAttribute("data-errors-styles-class")),`<div error="${a.type}" ${t?"style='"+t+"'":""} ${s?"class='"+s+"'":""} >${a.message}</div>`}validateInput({target:e,target:{value:a}}){let t=[],s=e.getAttribute("data-field");if(!s){console.log('one or more <input> elements are the missing data-field="" attribute.');return}let[i]=this.errorsTargets.filter(r=>r.getAttribute("data-field")===s);if(e.hasAttribute("data-validations"))try{let r=e.getAttribute("data-validations");o.singleQuotes.test(r)&&(r=r.replace(/'/g,'"')),this.handleJSONValidations(a,JSON.parse(r),t)}catch(r){console.log(r),console.log(`Error parsing JSON string on the data-validations attribute on data-field="${s}". Is the json string formatted properly?`);return}else this.handleValidations(e,a,t);i.innerHTML="",t.length?t.forEach(r=>{i.innerHTML+=this.errorElement(i,r),i.style.visibility="visible"}):i.style.visibility="invisible"}};u(c,"targets",["field","errors"]);export{c as InputValidator};
