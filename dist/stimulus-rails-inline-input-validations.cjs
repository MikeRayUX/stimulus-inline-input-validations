var n=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var m=Object.prototype.hasOwnProperty;var p=(e,t,i)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var v=(e,t)=>{for(var i in t)n(e,i,{get:t[i],enumerable:!0})},b=(e,t,i,l)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of h(t))!m.call(e,a)&&a!==i&&n(e,a,{get:()=>t[a],enumerable:!(l=c(t,a))||l.enumerable});return e};var x=e=>b(n({},"__esModule",{value:!0}),e);var o=(e,t,i)=>(p(e,typeof t!="symbol"?t+"":t,i),i);var A={};v(A,{InputValidator:()=>r});module.exports=x(A);var f=require("@hotwired/stimulus");var g={presence(e,t){e&&e.getAttribute("data-validate-presence")!="false"&&e.value.trim().length===0&&t.push("Can't be blank")},length(e,t){if(!e||!e.hasAttribute("data-validate-length"))return;let[i,l]=e.getAttribute("data-validate-length").split(",");e.value.length<i&&t.push(`Too short. Minimum ${i} characters`),e.value.length>l&&t.push(`Too long. Maximum ${l} characters`)},numericality(e,t){/^[+-]?(\d+(\.\d*)?|\.\d+)([eE][+-]?\d+)?$/.test(e.value)||t.push("Must be a number")}},s=g;var u=e=>e.getAttribute("data-field");var r=class extends f.Controller{connect(){this.textFieldTargets.forEach(e=>{e.setAttribute("data-action","input->input-validator#validateInput")})}validateInput({params:{validations:e},target:t}){let i=u(t),[l]=this.errorsTargets.filter(d=>d.getAttribute("data-field")==i);l.innerHTML="";let a=[];t.hasAttribute("data-validate-presence")&&s.presence(t,a),t.hasAttribute("data-validate-length")&&s.length(t,a),t.hasAttribute("data-validate-numericality")&&s.numericality(t,a),console.log("errors",a),a.length?a.forEach(d=>{l.innerHTML+=`<div class="text-sm text-red-500">${d}</div>`,l.style.visibility="visible"}):l.style.visibility="invisible"}};o(r,"targets",["textField","errors"]);
